// Copyright (c) 2011-2014 The Bitcoin Core developers
// Distributed under the MIT/X11 software license, see the accompanying
// file COPYING or http://www.opensource.org/licenses/mit-license.php.
#include <stdlib.h>
#include <time.h>
#include "main.h"
#include "miner.h"
#include "uint256.h"
#include "util.h"
#include <boost/foreach.hpp>
#include <boost/test/unit_test.hpp>
#include "VmScript/VmScriptRun.h"
#include "VmScript/CVir8051.h"
#include "VmScript/TestMcu.h"
#include "json/json_spirit_writer_template.h"
#include "rpcclient.h"
using namespace std;
using namespace boost;
using namespace json_spirit;

extern Object CallRPC(const string& strMethod, const Array& params);
extern int TestCallRPC(std::string strMethod, const std::vector<std::string> &vParams, std::string &strRet);
extern void GetAccountInfo(char *address);
extern void GenerateMiner();
	//
//	string strPrint;
//	int nRet;
//	Array params = RPCConvertValues(strMethod, vParams);
//
//	Object reply = CallRPC(strMethod, params);
//
//	// Parse reply
//	const Value& result = find_value(reply, "result");
//	const Value& error = find_value(reply, "error");
//
//	if (error.type() != null_type) {
//		// Error
//		strPrint = "error: " + write_string(error, false);
//		int code = find_value(error.get_obj(), "code").get_int();
//		nRet = abs(code);
//	} else {
//		// Result
//		if (result.type() == null_type)
//			strPrint = "";
//		else if (result.type() == str_type)
//			strPrint = result.get_str();
//		else
//			strPrint = write_string(result, true);
//	}
//	strRet = strPrint;
//	BOOST_MESSAGE(strPrint);
//	//cout << strPrint << endl;
//	return nRet;
//}
//static void GetAccountInfo(char *address) {
//	int argc = 3;
//	char *argv[3] = { "rpctest", "getaccountinfo", address };
//	CommandLineRPC(argc, argv);
//
//}
//static void GenerateMiner() {
//	int argc = 3;
//	char *argv[3] = { "rpctest", "setgenerate", "true" };
//	CommandLineRPC(argc, argv);
//}


std::string TxHash("");
void GenerateMiner(int count) {
	//cout <<"Generate miner" << endl;
	int argc = 3;
	char buffer[10] = {0};
	sprintf(buffer,"%d",count);
	char *argv[4] = { "rpctest", "setgenerate", "true", buffer};
	CommandLineRPC(argc, argv);
}
void GetAccountState1() {
	GetAccountInfo("5zQPcC1YpFMtwxiH787pSXanUECoGsxUq3KZieJxVG");
}
void CreateRegScriptTx1() {
	cout <<"CreateRegScriptTx1" << endl;
	int argc = 6;
	char *argv[6] =
			{ "rpctest", "registerscripttx", "5zQPcC1YpFMtwxiH787pSXanUECoGsxUq3KZieJxVG",
					"fd663c0200530000000000222200000000000000002222023c22e490147478cf79048002f0a3d8fcd9fa7a007b0f900062787579068015e493a3ad82ae838a828b83f0a3aa82ab838d828e83d8e9d9e71220d7123c6275d0007581bf75100075110f0200176c696e653a25642000ff00ffffffffffffffff0001000200fffffffffffffffe00ffffffffffffff01000400fffffffffffffc0400ffffff010003fffffc04000001020304050607304402200be02f1c72e079ece125495b293a2d995166c70dfb096f5256990b4450a08dd902200a95c1f2b418c0cc8755686543376012b758fe16ac1116866fddf004dd4393b1033e85aca4d7965d8b467b9829d5774abdd9c66a6018dee85f82f1e26ba28b6df20100090807060504030201000908070605040302010009080706050403020100304402200be02f1c72e079ece125495b293a2d995166c70dfb096f5256990b4450a08dd902200a95c1f2b418c0cc8755686543376012b758fe16ac1116866fdff004dd4393b1033e85aca4d7965d8b467b9829d5774abdd9c66a6018dee85f82f1e26ba28b6df20100090807060504030201000908070605040302010009080706050403020100304402200be02f1c72e079ece125495b293a2d995166c70dfb096f5256990b4450a08dd902200a95c1f2b418c0cc8755686543376012b758fe16ac1116866fddf004dd4393b1033e85aca4d7965d8b467b9829d5774abdd9c66a6019dee85f82f1e26ba28b6df20100090807060504030201000908070605040302010009080706050403020100304402200be02f1c72e079ece125495b293a2d995166c70dfb096f5256990b4450a08dd902200a95c1f2b418c0cc8755686543376012b758fe16ac1116866fddf004dd4393b1033e85aca4d7965d8b467b9829d5774abdd9c66a6019dee85f82f1e26ba28b6df201000908070605040302010009080706070403020100090807060504030201000102030405a7488920b38bd8e400010203040506070800746573744c6f675072696e742054455354007465737447657443757252756e456e764865696768743a256400746573744765745478436f6e74616374733a00746573744765744163636f756e74733a00746573744765744163636f756e745075626c69636b65793a00746573744765745478436f6e4669726d4865696768743a256400746573744765745469704865696768743a25640074657374476574426c6f636b486173683a00746573744765744375725478486173683a0068656c6c6f006b6579006b6579310068656c6c6f7700737365004c554f000400000073657266003132330066756e6b0074657374496e743634496e6974616c0074657374436f6d70617265007465737461646400746573746d756c00746573747375620074657374646976007465737453484132353600746573745369676e6174757265566572696679007465737444657300746573744c6f675072696e74007465737447657443757252756e456e7648656967687400746573744765745469704865696768740074657374476574426c6f636b48617368007465737447657443757254784861736800313a74657374206f6b00746573744765745478436f6e746163747300746573744765744163636f756e747300746573744765744163636f756e745075626c69636b6579007465737451756572794163636f756e7442616c616e636500746573744765745478436f6e4669726d48656967687400746573744973417574686f726974656400746573745772697465446174614442007465737444656c6574654461746144420074657374526561644461746156616c7565444200746573744d6f646966794461746144420074657374476574444253697a650074657374476574444256616c756500746573745265616444617461444254696d6500746573744d6f6469667944617461444254696d6500746573744d6f646966794461746144425661766c6500746573747365636f6e6464620001000000000000000500000007000000446573206572726f72002d002500ffff0000e066701008a3e066700a08a3e066700408a3e06622c008c3e096f50808a3e096420808a3e096420808a3e0964208a2d265d033e5087001d3d00822c3e7960809e7960809e7960809e79622e4cfc0e0e4cec0e0e4cdc0e0e4ccc0e075f020e626f608e633f608e633f608e633f6181818ec33fced33fdee33feef33ffc3ec9709ed9709ee9709ef97191919400fffec97fc09ed97fd09ee97fe191906d5f0bfecf709edf709eef709eff7191919d0e0fcd0e0fdd0e0fed0e0ff22e4c396f608e496f608e496f608e496f622e056f608a3e056f608a3e056f608a3e056f622e0f608a3e0f608a3e0f608a3e0f622e6f008a3e6f008a3e6f008a3e6f022e0faa3e0fba3e0fca3e0fd22e0f8a3e0f9a3e0faa3e0fb22cac0e0e6f0a308dafad0e0fa22cac0e0e0a3c582ccc582c583cdc583f0a3c582ccc582c583cdc583dae6d0e0ca22251010af08f510400c15118008f51040021511d2af2200c0d0251010af08f510500c05118008f51050020511d2afd0d0222510f58210af08f510400c15118008f51040021511d2af85118322c5822510c582c583351110af07f5118582108007f511858210d2afc583222510f582e43511f583222510f8e43511f9222510fae43511fb222510fce43511fd22c82510c8c93511c922ca2510cacb3511cb22cc2510cccd3511cd22e4732510c582c0e0e51134ffc583c0e0e510c3958224f910af088583118582108008858311858210d2afcef0a3e520f0a37808e608f0a3defaeff0a3e58124fbf8e608f0a3e608f0a30808e608f0a3e608f0a315811581d0e0fed0e0f815811581e8c0e0eec0e022851183851082e0a3fee0a3f5207808e0a3f608dffae0a3ffe0a3c0e0e0a3c0e0e0a3c0e0e0a3c0e010af088582108583118008858210858311d2afd083d082227404800474028000c0e0f404120749d0e01206ea2274028000ccc0e0edc0e0e510c39cccad1150011d10af068c108d1180068c108d11d2af1206f7d0e0fdd0e0fc2279000223ee74f71207c174ec1207188a088b09901474ac10ad1174141206f7780812086b7c007d0f7402120794123ac2740212072e79007c147d00aa10ab111229d9741412072e7f0202082774f812071879017c097d0faa10ab11122539400a7ace7b001208aec3803379147c097d0faa10ab11122539500a7acf7b001208aec3801a79087c0b7d0faa10ab11122539400a7ad07b001208aec38001d3740812072e2274f012071879017c147d0f740812079412253979017c147d0faa10ab11122539ac10ad1174081207941225a4e9600a7ad97b001208aec3806d79017c167d0f740812079412253979017c147d0faa10ab11122539ac10ad1174081207941225a4e96402600a7adc7b001208aec3803779017c147d0f740812079412253979017c167d0faa10ab11122539ac10ad1174081207941225a4e96401600a7adf7b001208aec38001d3741012072e2274f71207c174d812071879087c0b7d0faa10ab1112253979017c147d0f741012079412253979017c887d147420120794122539740812078c88088909780812086b741212079c74021207941226f2740212072e742012079c74081207941225a4e9feee600b7aeb7b001208aec3020b3379017c147d0faa10ab1112253979017c147d0f741012079412253979017c167d0f7418120794122539740812078c88088909780812086b740212079c74021207941226f2740212072e741812079c74081207941225a4e9feee600a7af27b001208aec3806679087c187d0faa10ab1112253979017c147d0f741012079412253979087c0b7d0f7418120794122539740812078c88088909780812086b741212079c74021207941226f2740212072e741812079c74081207941225a4e9feee600a7af97b001208aec38001d3742812072e7f0202082774f71207c174d812071879087c0b7d0f741012079412253979087c0b7d0f740812079412253979017c147d0f7420120794122539a810a91188088909780812086b740a12079c74121207941226bd740212072e742012079caa10ab111225a4e9feee600b7a057b011208aec3020c7579087c217d0f741012079412253979017c2a7d0f740812079412253979087c2c7d0f7418120794122539a810a91188088909780812086b740a12079c74121207941226bd740212072e741812079caa10ab111225a4e9feee600a7a0c7b011208aec3806579047c357d0f741012079412253979017c2a7d0f740812079412253979057c3a7d0f7418120794122539a810a91188088909780812086b740a12079c74121207941226bd740212072e741812079caa10ab111225a4e9feee600a7a137b011208aec38001d3742812072e7f0202082774f71207c174e012071879087c0b7d0f741812079412253979087c0b7d0f741012079412253979017c887d14aa10ab11122539740812078c88088909780812086b741212079c741a120794122727740212072eac10ad1174081207941225a4e9feee600b7a207b011208aec3020e0079017c147d0f741012079412253979087c187d0faa10ab11122539740812078c88088909780812086b741212079c741a120794122727740212072eac10ad1174081207941225a4e9feee600b7a257b011208aec3020e0079017c147d0f741012079412253979017c167d0faa10ab11122539740812078c88088909780812086b741a12079c7412120794122727740212072eac10ad1174081207941225a4e9feee600a7a2b7b011208aec3806579017c147d0f741812079412253979017c167d0f741012079412253979087c0b7d0faa10ab11122539740812078c88088909780812086b741212079c741a120794122727740212072eac10ad1174081207941225a4e9feee600a7a337b011208aec38001d3742012072e7f0202082774f71207c174e012071879087c0b7d0f741812079412253979017c147d0f741012079412253979087c0b7d0f7408120794122539a810a91188088909780812086b741212079c741a12079412275c740212072e740812079caa10ab111225a4e9feee600a7a407b011208aec3803ba810a91188088909780812086b741a12079c741212079412275c740212072e740812079caa10ab111225a4e9feee600a7a457b011208aec38001d3742012072e7f0202082774f51207c174d81207187508007509007e007f0090148a740812079c74201206f7740812078c880a890b780a12086beefceffdaa08ab09122791740212072e500a7a527b011208aec38038900f40ac10ad1174081206f7740812078c880a890b780a12086b7c087d007402120794122791740212072e400a7a547b011208aec38001d3742812072e7f0402082774f71207c17582e17583fd1207649014aa740212079c74011206f79014ab740112079c74011206f79014acac10ad1174011206f7750801750900780812086b740212078c88088909780812086b750801750900780812086b740712078c88088909780812086b7c017d00740a120794122812740812072e500b7a5c7b011208aec30211c1900f487cd97d011207b674461206f7900f8e7cb87d011207b674211206f7900faf7c987d011207b674201206f7750820750900780812086b789a79011207a488088909780812086b750821750900780812086b78be79011207a488088909780812086b7c467d007ae17b011207ad122812740812072e400b7a667b011208aec30211c1900fcf7c527d011207b674461206f79010157c317d011207b674211206f79010367c117d011207b674201206f7750820750900780812086b781379011207a488088909780812086b750821750900780812086b783779011207a488088909780812086b7c467d007a5a7b011207ad122812740812072e500b7a717b011208aec30211c190105674cb12079c74461206f790109c74aa12079c74211206f79010bd748a12079c74201206f7750820750900780812086b748c12078c88088909780812086b750821750900780812086b74b012078c88088909780812086b7c467d0074d3120794122812740812072e500a7a7c7b011208aec380779010dd744412079c74461206f7901123742312079c74211206f7901144740312079c74201206f7750820750900780812086b740512078c88088909780812086b750821750900780812086b742912078c88088909780812086b7c467d00744c120794122812740812072e500a7a887b011208aec38001d392f075821f758302120764a2f07f0202082774f71207c174be1207189014ad741012079c74321206f7750832750900780812086b741212078c88088909780812086be4f508f509780812086b7508df750914780812086bd2f07c007d007adf7b141228d5740812072e8a088b09e5084509600b7a8f7b011208aec30213e0750832750900780812086b741212078c88088909780812086be4f508f509780812086b7508df750914780812086bc2f07c007d007adf7b141228d5740812072e8a088b09e5084509600b7a907b011208aec30213e0750832750900780812086b741212078c88088909780812086b750808750900780812086b750872750911780812086bd2f07c0d7d007a647b111228d5740812072e8a088b09ae08af09ee4f700b7a937b011208aec30213e09014e0ac10ad1174101206f7750810750900780812086b740212078c88088909780812086b750808750900780812086b750872750911780812086bc2f0eefceffd74181207941228d5740812072e8a088b0974106508700474006509600b7a957b011208aec30213e07410120782e5822ef8e5833ff9e824fbf582e934fff5837409f07410120782e5822ef8e5833ff9e824fff582e934fff5837405f0750810750900780812086b740212078c88088909780812086b750808750900780812086b750872750911780812086bc2f0eefceffd74181207941228d5740812072e8a088b09e5084509700a7a997b011208aec38001d3744212072e7f0202082779007c137d007a7b7b111229d979017c137d007a7b7b111229d9d32274f51207c174ce120718122a288a088b098c0a8d0b9014f0ac10ad1174321206f778081208677c8d7d117404120794123ac2740412072e79007c347d00aa10ab111229d9d3743212072e7f0402082774f71207c174ce120718eafeebff79017c207d00eefaeffb1229d9901522ac10ad1174321206f7750832750900780812086b740212079ceefaeffb122aab740212072e79007c137d007aa77b111229d979017c327d00aa10ab111229d9d3743212072e7f0202082774f31207c174fa1207188a0a8b0b901554ac10ad1174061206f7750800750900750c06750d00780c12086b740212079caa08ab09122b26740212072e8a0c8b0dae0caf0dee4f600a7ac07b011208aec38053750c06750d00780c12086b740212079caa0aab0b122b26740212072e8a0c8b0dae0caf0d74066e700374006f600a7ac37b011208aec3801b79007c117d007aba7b111229d979017c067d00aa10ab111229d9d3740612072e7f0602082774f31207c174d91207188a0a8b0b90155aac10ad1174061206f7901560740612079c74211206f7750800750900750c21750d00780c12086b740812079caa08ab09122bac740212072ee433fe7f00ee4f600a7ace7b011208aec38072750c06750d00780c12086b740212079caa0aab0b122b26740212072e750c21750d00780c12086b740812079c7402120794122bac740212072ee433f87900e8fee9ff74216e700374006f600a7ad27b011208aec3801c79007c197d007acb7b111229d979017c217d0074061207941229d9d3742712072e7f0602082774f71207c174f2120718eafeebff901581ac10ad1174061206f7740612079c7900aa10ab11122c45500a7adb7b011208aec38045750806750900780812086b740212079ceefaeffb122b26740212072e740612079c7900aa10ab11122c45400a7add7b011208aec3800f79017c087d0074061207941229d9d3740e12072e7f0202082774f51207c174ce120718eafeebffeefaeffb122cb08a088b098c0a8d0b901587ac10ad1174321206f778081208677ce47d117404120794123ac2740412072e79007c327d00aa10ab111229d9d3743212072e7f0402082774f51207c174ce1207181232338a088b098c0a8d0b9015b9ac10ad1174321206f778081208677cfe7d117404120794123ac2740412072e79007c327d00aa10ab111229d9d3743212072e7f0402082774f71207c174e01207189015ebac10ad1174201206f7a810a91188088909780812086b9014521206d21232aa740212072e79007c127d007a127b121229d979017c207d00aa10ab111229d9d3742012072e7f02020827c082c08374e012071890160bac10ad1174201206f7aa10ab1112333479007c127d007a247b121229d979017c207d00aa10ab111229d9d3742012072ed083d0822274f71207c174f2120718eafeebff90162bac10ad1174061206f7740612079caa10ab11123384500a7a057b021208aec38043750806750900780812086b740212079ceefaeffb122b26740212072e79017c147d0f7406120794122539740612079caa10ab11123384500a7a087b021208aec38001d3740e12072e7f0202082774f11207c1750e00750f007e367f12780279007a007b00880889098a0a8b0b7808120867750c06750d00780c12086beefceffd7900aa0eab0f122d3d740612072e500b7a127b021208aec30219a97808120867750c06750d00780c12086beefceffd7909aa0eab0f122d3d740612072e500b7a137b021208aec30219a9750e3c750f127e007f007808120867750c06750d00780c12086beefceffd7904aa0eab0f122d3d740612072e500a7a167b021208aec38071750e3c750f127e367f127808120867750c06750d00780c12086beefceffd7904aa0eab0f122d3d740612072e400a7a197b021208aec38039750e40750f127e457f127808120867750c07750d00780c12086beefceffd7904aa0eab0f122d3d740612072e400a7a1c7b021208aec38001d37f08020827c082c0837582007583007900aa82ab83122e0e500a7a227b021208aec3801c75823c7583127904aa82ab83122e0e400a7a247b021208aec38001d3d083d0822274f71207c174f91207187e007f00901631ac10ad1174071206f7e4f508f509780812086b740212079c7900eefaeffb122ea3740212072e8a088b09e5084509600b7a2b7b021208aec3021af87e3c7f12e4f508f509780812086b740212079c7904eefaeffb122ea3740212072e8a088b09e5084509600b7a2d7b021208aec3021af8750807750900780812086b740212079c7904eefaeffb122ea3740212072e8a088b09e5084509600a7a2e7b021208aec380567e407f12750807750900780812086b740212079c7904eefaeffb122ea3740212072e8a088b09e5084509700a7a307b021208aec380207c457d12aa10ab11123b4f8a088b09e5084509600a7a317b021208aec38001d3740712072e7f0202082774f11207c17e007f00750e00750f00750800750900750a00750b007808120867750c07750d00780c12086bac0ead0f7900eefaeffb122f53740612072e500b7a397b021208aec3021bf37808120867e4f50cf50d780c12086bac0ead0f7905eefaeffb122f53740612072e500a7a3a7b021208aec3807a7e4c7f127808120867e4f50cf50d780c12086bac0ead0f7904eefaeffb122f53740612072e500a7a3c7b021208aec380497e407f12750e50750f12780579007a007b00880889098a0a8b0b7808120867750c04750d00780c12086bac0ead0f7905eefaeffb122f53740612072e400a7a407b021208aec38001d37f0802082774f51207c19014521230248a088b098c0a8d0b78081205d6600a7a457b021208aec38001d37f0402082774f71207c174f0120718901638740b12079c74051206f7901254740312079c74041206f78510828511837400f074011207827400f0a37400f07c007d007e007f007407120782ecf0a3edf0a3eef0a3eff0740712078c88088909780812086b740312078c88088909780812086b740712078c88088909780812086b740612078c88088909780812086b741312078c88088909780812086b9014561206d212309b740a12072e500b7a4f7b021208aec3021deb8510828511837405f0740712078c88088909780812086b740312078c88088909780812086b740712078c88088909780812086b740612078c88088909780812086b741312078c88088909780812086b9014561206d212309b740a12072e500b7a517b021208aec3021deb74011207827404f0a37400f0740712078c88088909780812086b740312078c88088909780812086b740712078c88088909780812086b740612078c88088909780812086b741312078c88088909780812086b9014561206d212309b740a12072e400a7a537b021208aec380417c407d12740b120794123b4f8a088b09e5084509600a7a547b021208aec380217c507d127403120794123b4f8a088b09e5084509600a7a557b021208aec38001d3741012072e7f0202082774f51207c174fc1207187e007f007a007b007c007d00851082851183eaf0a3ebf0a3ecf0a3edf0ac10ad117900eefaeffb123412500a7a5d7b021208aec3805a7e587f12ac10ad117905eefaeffb123412500a7a5f7b021208aec3803d7e407f12ac10ad117905eefaeffb123412500a7a617b021208aec3802090145a78081206b485108285118378081205d6600a7a627b021208aec38001d3740412072e7f0402082774f51207c17e007f00750800750900750a00750b0078081208677900eefaeffb12348b740412072e500a7a697b021208aec380577e587f1278081208677900eefaeffb12348b740412072e500a7a6b7b021208aec380347e407f12780779007a007b00880889098a0a8b0b78081208677905eefaeffb12348b740412072e400a7a6e7b021208aec38001d37f0402082774f31207c174f71207187e007f00750c00750d00750801750900780812086bac0cad0d7900eefaeffb12351f740212072e500b7a757b021208aec30220a3e4f508f509780812086bac0cad0d7905eefaeffb12351f740212072e500b7a767b021208aec30220a37e5d7f12750c61750d12750805750900780812086bac0cad0d7904eefaeffb12351f740212072e500b7a797b021208aec30220a37e407f12750805750900780812086bac0cad0d7905eefaeffb12351f740212072e400b7a7b7b021208aec30220a37a007b007c007d00851082851183eaf0a3ebf0a3ecf0a3edf090163d740412079c74051206f7750805750900780812086b740612079c7905eefaeffb122ea3740212072e8a088b09e5084509700a7a7e7b021208aec380597c617d127404120794123b4f8a088b09e5084509600a7a7f7b021208aec38039ac10ad117905eefaeffb123412400a7a807b021208aec3802090145e78081206b485108285118378081205d6600a7a817b021208aec38001d3740912072e7f0602082774f51207c11230248a088b098c0a8d0be5084509450a450b600a7a337b031208aec38001c37f0402082774e0120718750800750902750a00750b0078081208677a427b161235d6740412072e901642e014601514700302224b1470030223041470030223c30223da1208f5401079007c117d007a667b121229d91208a912094c401079007c0d7d007a767b121229d91208a91209f8401079007c097d007a827b121229d91208a9120b3d401079007c097d007a8a7b121229d91208a9120c7f401079007c097d007a927b121229d91208a9120e0a401079007c097d007a9a7b121229d91208a9120ebd401079007c0c7d007aa27b121229d91208a9120f4a401079007c157d007aad7b121229d91208a91211d3401079007c097d007ac17b121229d91208a91213ea401079007c0e7d007ac97b121229d91208a9121406401079007c187d007ad67b121229d91208a912171e401079007c127d007aed7b121229d91208a912176d401079007c127d007afe7b121229d91208a91217c3401079007c127d007a0f7b131229d91208a979007c0b7d007a207b131229d90223df750c20750d00780c12086b7c427d167402120794123b8e740212072e8a0c8b0daa0cab0d121455401079007c137d007a2a7b131229d91208a9aa10ab111214bd401079007c117d007a3c7b131229d91208a9aa10ab1112156c401079007c197d007a4c7b131229d91208a9aa10ab11121644401079007c197d007a647b131229d91208a9aa10ab111216c7401079007c187d007a7c7b131229d91208a9aa10ab11121804401079007c127d007a937b131229d91208a90223df121883401079007c117d007aa47b131229d91208a91219ae401079007c127d007ab47b131229d91208a91219ee401079007c157d007ac57b131229d91208a9121b02401079007c127d007ad97b131229d91208a9121bf8401079007c0f7d007aea7b131229d91208a9121c22401079007c107d007af87b131229d91208a9121df5401079007c147d007a077b141229d91208a9121e99401079007c167d007a1a7b141229d91208a9121f29402e79007c177d007a2f7b141229d91208a9801c1220ad401779007c0e7d007a457b141229d91208a9800579001223ee79011223ee7a007b00742012072e2274f81207c1e9feee90effdf01200087f0102082774f81207c1e9feee90effdf090effe7400f01200127f01020827c082c0838a828b83e0faa3e0fbd083d08222ea2cf8eb3df9c3e89ae99b4007c3e89ce99d5004d2f08002c2f0a2f02274f31207c174fc120718851082851183ecf0a3edf08a0a8b0b7508ff7509efaa08ab0912241c8a0c8b0dae0caf0d851082851183e02ef8a3e03ff9e82402f85001097402120782e8f0a3e9f0851082851183e02402fca3e03400fdeefaeffb12242e40147c027d00851082851183e0faa3e0fb12242e500579001223ee750c02750d00780c12086b740412079caa08ab09123b8e740212072e750c02750d00780c12086b740212079ce5082ef8e5093ff9e82402fae439fb123b8e740212072e85108285118312087cac0aad0be5082ef8e5093ff9e82404fae439fb123b8e740212072e740412072e7f0602082774f31207c18a088b09ecfeedff890a750c08750d00780c12086b7c007d00aa08ab09123bf8740212072ee50ac394095034a80a74ff28f50ae860278e828f83e0c0e0850a0c750d00e508250cf582e509350df583d0e0f08e828f83a3ae82af8380cfd38001c37f0602082774f51207c18a0a8b0becfeedff90efff7400f090f0007400f07c087d00aa0aab0b12244b7c087d00eefaeffb12244b79001224027508007509007508ff7509ef850882850983e064017004a3e06400700c850882850983a3a3e0f9800779001223ee79037f0402082774f11207c174fe120718851082851183eaf0a3ebf08c0e8d0f890a7411120782e0f508a3e0f50990efff7400f090f0007400f07c087d00851082851183e0faa3e0fb12244b7c087d00aa0eab0f12244ba90a1224027eff7fef8e828f83e064087004a3e064007038750c08750d00780c12086b7c007d00aa08ab09123bf8740212072e8e828f8312087cee2402fce43ffdaa08ab09123b8e740212072ed3800679001223eec3740212072e7f0802082774f51207c18a088b09ecfeedff740b120782e0f50aa3e0f50b780a12086b7901eefceffdaa08ab0912260d740212072e7f0402082774f51207c18a088b09ecfeedff740b120782e0f50aa3e0f50b780a12086b7902eefceffdaa08ab0912260d740212072e7f0402082774f51207c18a088b09ecfeedff740b120782e0f50aa3e0f50b780a12086b7903eefceffdaa08ab0912260d740212072e7f0402082774f51207c18a088b09ecfeedff740b120782e0f50aa3e0f50b780a12086b7904eefceffdaa08ab0912260d740212072e7f0402082774f11207c18a0e8b0fecfeedff740f120782e0f50aa3e0f50b90efff7400f090f0007400f0ee4f7003c38050eefceffdaa0eab0f12244b79051224027508ff7509ef850882850983e064207004a3e064007023750c20750d00780c12086be5082402fce43509fdaa0aab0b123b8e740212072ed3800679001223eec37f0802082774f11207c174fe120718851082851183eaf0a3ebf08c0a8d0b7413120782e0fea3e0ff7415120782e0f50ea3e0f50f7417120782e0f50ca3e0f50d90efff7400f090f0007400f0e50a450b6004ee4f7003c38065ac0aad0b851082851183e0faa3e0fb12244beefceffd7411120782e0faa3e0fb12244bac0cad0daa0eab0f12244b79071224027508ff7509ef850882850983e064017004a3e064007015850882850983a3a3e06004d2f08002c2f0a2f0800679001223eed3740212072e7f0802082774f11207c174fd1207187401120782eaf0a3ebf0a2f0e433c0e0851082851183d0e0f08c0a8d0b7414120782e0f508a3e0f5097416120782e0f50ea3e0f50f7418120782e0f50ca3e0f50d90efff7400f090f0007400f0e50a450b6006e508450970077a007b000229cfac0aad0b7401120782e0faa3e0fb12244bac08ad097412120782e0faa3e0fb12244b7c017d00aa10ab1112244b79061224027eff7fef8e828f83e0f8a3e0f9e84960378e828f83e0f8a3e0f9c3e50c98e50d9940258e828f8312087cee2402fce43ffdaa0eab0f123b8e740212072e8e828f83e0faa3e0fb801679007c0b7d007a627b141229d979001223ee7a007b00740312072e7f0802082774f71207c174ff120718e9c0e0851082851183d0e0f08a088b09ecfeedff90efff7400f090f0007400f07c017d00aa10ab1112244beefceffdaa08ab0912244b7909122402740112072e7f0202082774f71207c174fc12071890efff7400f090f0007400f079121224027eff7fef8e828f83e064047004a3e06400600a7a007b007c007d0080417a007b007c007d00851082851183eaf0a3ebf0a3ecf0a3edf0750804750900780812086bee2402fce43ffd7402120794123b8e740212072e8510828511831206d2740412072e7f0202082774f31207c18a0c8b0d8c0a8d0b740d120782e0f508a3e0f50990efff7400f090f0007400f07c207d00aa0cab0d12244b790a1224027eff7fef8e828f83e0f8a3e0f9c3e50898e50999400d8e828f83e0f8a3e0f9e8497003c3801b8e828f8312087cee2402fce43ffdaa0aab0b123b8e740212072ed37f0602082774f31207c18a0c8b0d8c0a8d0b740d120782e0f508a3e0f50990efff7400f090f0007400f07c207d00aa0cab0d12244b790b1224027eff7fef8e828f83e0f8a3e0f9e84960128e828f83e0f8a3e0f9c3e50898e5099950067a007b0080238e828f8312087cee2402fce43ffdaa0aab0b123b8e740212072e8e828f83e0faa3e0fb7f0602082774f31207c18a0c8b0d8c0a8d0b740d120782e0f508a3e0f50990efff7400f090f0007400f07c067d00aa0cab0d12244b790c1224027eff7fef8e828f83e0f8a3e0f9c3e50898e50999402b8e828f83e064417004a3e06400600f8e828f83e064217004a3e06400700d8e828f83e0f8a3e0f9e8497003c3801b8e828f8312087cee2402fce43ffdaa0aab0b123b8e740212072ed37f0602082774f31207c18a0c8b0d890a8c088d0990efff7400f090f0007400f0e50a70067c067d0080047c147d00aa0cab0d12244b790d1224027eff7fef8e828f83e064087004a3e064006003c3801b8e828f8312087cee2402fce43ffdaa08ab09123b8e740212072ed37f0602082774f71207c174fc1207188a088b0990efff7400f090f0007400f07c207d00aa08ab0912244b790e1224027eff7fef8e828f83e064047004a3e06400600a7a007b007c007d00803c7a007b007c007d00851082851183eaf0a3ebf0a3ecf0a3edf08e828f8312087cee2402fce43ffd7402120794123b8e740212072e7a017b007c007d00740412072e7f0202082774f11207c174fd1207187401120782eaf0a3ebf089088c0e8d0f7412120782e0fea3e0ff90efff7400f090f0007400f0e508600be508c394095004ee4f7004c3022e0485080a750b00ac0aad0b7401120782e0faa3e0fb12244beefceffdaa0eab0f12244b7c047d00741412079412244b7913122402750aff750bef850a82850b83e064017004a3e064006003c380377400c0e0851082851183d0e0f0750c01750d00780c12086be50a2402fce4350bfd7402120794123b8e740212072e851082851183e0a2e0740312072e7f0802082774f31207c174ff1207188a0a8b0b890890efff7400f090f0007400f0e5086007e508c394094003c3806185080c750d00ac0cad0daa0aab0b12244b79141224027eff7fef8e828f83e064017004a3e064006003c380357400c0e0851082851183d0e0f0750c01750d00780c12086bee2402fce43ffd7402120794123b8e740212072e851082851183e0a2e0740112072e7f0602082774f11207c174fe120718851082851183eaf0a3ebf089088c0c8d0d7411120782e0f50aa3e0f50b90efff7400f090f0007400f0e508600de508c394095006e50a450b70067a007b00805c85080e750f00ac0ead0f851082851183e0faa3e0fb12244b79151224027eff7fef8e828f83e0f8a3e0f9c3e50a98e50b9950067a007b0080238e828f8312087cee2402fce43ffdaa0cab0d123b8e740212072e8e828f83e0faa3e0fb740212072e7f0802082774f11207c174fd1207187401120782eaf0a3ebf089088c0e8d0f7412120782e0fea3e0ff90efff7400f090f0007400f0e508600be508c394095004ee4f7004c302301a85080a750b00ac0aad0b7401120782e0faa3e0fb12244beefceffdaa0eab0f12244b7c047d00741412079412244b7916122402750aff750bef850a82850b83e064017004a3e064006003c380377400c0e0851082851183d0e0f0750c01750d00780c12086be50a2402fce4350bfd7402120794123b8e740212072e851082851183e0a2e0740312072e7f0802082774f71207c174fc12071879171224027eff7fef8e828f83e064047004a3e06400600a7a007b007c007d0080417a007b007c007d00851082851183eaf0a3ebf0a3ecf0a3edf0750804750900780812086bee2402fce43ffd7402120794123b8e740212072e8510828511831206d2740412072e7f0202082774f11207c174fc120718851082851183eaf0a3ebf0a3ecf0a3edf07415120782e0f50aa3e0f50b7419120782e0f508a3e0f509741b120782e0f50ea3e0f50f90efff7400f090f0007400f0850a82850b83e0601b850a82850b83e0c39409500f850882850983e0f8a3e0f9e8497004c30232297c047d00aa10ab1112244b79181224027eff7fef8e828f83c3e09409a3e09400500d8e828f83e0f8a3e0f9e8497004c30232298e828f8312087cee2402fce43ffd7415120782e0faa3e0fb123b8e740212072e8e828f83e0f8a3e0f9e8c0e0850a82850b83d0e0f08e828f83e0f8a3e0f9ee28f8ef39f9e82402fee439ff850882850983c082c0838e828f83e0f8a3e0f9d083d082c3e098a3e0995003c3807b8e828f8312087cee2402fce43ffd7419120782e0faa3e0fb123b8e740212072e8e828f83e0f8a3e0f9850882850983e8f0a3e9f08e828f83e0f8a3e0f9ee28f8ef39f9e82402fee439ff8e828f83e064047004a3e064006003c3801f750c04750d00780c12086bee2402fce43ffdaa0eab0f123b8e740212072ed3740412072e7f0802082774f71207c174fc120718790f1224027eff7fef8e828f83e064017004a3e06400600a7a007b007c007d0080417a007b007c007d00851082851183eaf0a3ebf0a3ecf0a3edf0750804750900780812086bee2402fce43ffd7402120794123b8e740212072e8510828511831206d2740412072e7f0202082774f71207c174fc120718851082851183eaf0a3ebf0a3ecf0a3edf0740d120782e0f508a3e0f50990efff7400f090f0007400f07c047d00aa10ab1112244b79101224027eff7fef8e828f83c3e09421a3e09400500d8e828f83e0f8a3e0f9e8497003c3801b8e828f8312087cee2402fce43ffdaa08ab09123b8e740212072ed3740412072e7f0202082774f71207c18a088b0979191224027eff7fef8e828f83c3e09421a3e09400500d8e828f83e0f8a3e0f9e8497003c3801b8e828f8312087cee2402fce43ffdaa08ab09123b8e740212072ed37f0202082774f31207c174ff1207188a0a8b0b8c088d0990efff7400f090f0007400f07c067d00aa0aab0b12244b7c087d00aa08ab0912244b79111224027eff7fef8e828f83e064017004a3e064006003c380357400c0e0851082851183d0e0f0750c01750d00780c12086bee2402fce43ffd7402120794123b8e740212072e851082851183e0a2e0740112072e7f0602082774f11207c18a0e8b0f890a8c088d0990efff7400f090f0007400f0e50a6007e50ac394094003c3804b850a0c750d00ac0cad0daa0eab0f12244b791a1224027eff7fef8e828f83e064047004a3e064006003c3801f750c04750d00780c12086bee2402fce43ffdaa08ab09123b8e740212072ed37f0802082774f31207c174ff1207188a0a8b0b890890efff7400f090f0007400f0e5086007e508c394094003c3806085080c750d00ac0cad0daa0aab0b12244b7c047d00740e12079412244b791b1224027eff7fef8e828f83e064017004a3e064006003c38028750c01750d00780c12086bee2402fce43ffd7402120794123b8e740212072e851082851183e0a2e0740112072e7f0602082774f11207c174fd1207187401120782eaf0a3ebf089088c0e8d0f7412120782e0fea3e0ff90efff7400f090f0007400f0e508600be508c394095004ee4f7003c3806b85080a750b00ac0aad0b7401120782e0faa3e0fb12244beefceffdaa0eab0f12244b791c122402750aff750bef850a82850b83e064017004a3e064006003c3802a750c01750d00780c12086be50a2402fce4350bfd7402120794123b8e740212072e851082851183e0a2e0740312072e7f0802082774f11207c174fe120718851082851183eaf0a3ebf0741112078278081206b47eff7fef8e828f83e0f8a3e0f9e84960198e828f83e0f50ca3e0f50de4f50ef50f780c7908120611500a7a007b007c007d0080328e828f8312087cee2402fce43ffd7402120782e0faa3e0fb123b8e740212072e8e828f83e0f50ca3e0f50daa0cab0de4fcfd740212072e7f0802082774f31207c18a0a8b0becfaedfb740d120782e0fea3e0ff740f120782e0f508a3e080228e828f83e0f9850a82850b831207bf8e828f83a3ae82af83e50824fff508e50934fff509e508450970d67f0602082774f11207c174e31207187403120782eaf0a3ebf07401120782ecf0a3ed803e750801750900780812086b742e12078212087c7405120782123a70120782e0faa3e0fb123665740412072e7401120782eaf0a3ebf0742c120782eef0a3eff0742c120782123a6b700e7a007b00741d12072e7f08020827742c120782e02401fea3e03400ff7425687096742c120782eef0a3eff0742c120782123a5ee0851082851183f0742c120782e02401f8a3e03400f9742c120782e8f0a3e9123a5524db7003023a4124cd70030239cb24f5603214700302381524fb700302381524fa70030239cb1470030239e224fd7003023a0924fe70030239cb24fd70030239cb023715742e120782123a78c0e07407120782d0e0f0742e120782123aab120782123a99750801750900780812086b740912078c88088909780812086b7405120782123a70120782e0faa3e0fb123665740412072e7401120782eaf0a3eb023714742e120782123a78f508a3e0f5093395e0f50af50b742e120782123aab120782123a9990145678081205eb4038750c01750d00780c12086b750c6c750d14780c12086b7405120782123a70120782e0faa3e0fb123665740412072e7401120782eaf0a3ebf08510828511837464123a55646f7009740e12078274088017e0442064786009740e120782740a8007740e1207827410f0a3e4f0a3f0a3f07405120782740bf0a3e4f0740812078278081206c3851082851183e06464702390145678081205eb4019740812078278081206b47808120690740812078278081206c37405120782e024fffaa3e034fffb7405120782eaf0a3ebf07408120782780c1206b4740e12078278081206b4780c7908120621e5082430fcc3943a400b851082851183e024af2cfc7412120782e5822af8e5833bf9740c120782e8f0a3e9f0740c120782123a5eecf0740812078278081206b4740e120782780c1206b47808790c120621740812078278081206c374081207821206dee8494a4b60177405120782c3e09401a3e09400a2d265d03340030238f47405120782e0f8a3e0f9740bc398f508e499f509780812086b740e12078212087c0237f1742e120782123a88120782123aab120782123a9e023882742e120782123a88120782123aab120782123a9990147078081206a18510828511837478023882742e120782123a6ba3e0f988828983e0f508a3e0f509e82402f8500109742e120782123a99aa08ab09123c468a0a8b0b780a12086b0237ec750801750900780812086b75086e7509140237ecf0851082851183e022123a6222e0f8a3e0f583888222123ab9f822e0fca3e0fd740722123a7c22123abdf8a3e0f5838882e022123a7cf508a3e0f509e4f50af50b742e22123a9ef022e0faa3e0f5838a82e8f0a3e922123ab92402f8a3e03400f9742e22123abd22123a62e02274f71207c174fc120718eafeebff740d12078c7402120782e8f0a3e9f0851082851183eef0a3eff0740212078c88088909780812086b8c088d09780812086b740412079c7acb7b3b1236b7740412072e8a08851082851183e0faa3e0f5838a82e4f0c3eb9400a2d265d0335004aa088012851082851183e0f8a3e0f9e8c39efae99ffb740412072e7f02020827c082c083800ea3aa82ab838c828d83a3ac82ad838c828d83e0f88a828b83e0f9e8697007e970df7a00800de0c39850067aff7bff80047a017b00d083d0822274f81207c1eaf8ebf97408120782e0fea3e0801f8c828d83e088828983f0a3a882a9838c828d83a3ac82ad83ee24ff1eef34ffffee4f70dc7f01020827c082c0838a828b83e0f8a3e0f5838882e9f08a828b83e02401fca3e03400fd8a828b83ecf0a3edf0d083d08222c082c083851082851183e0f8a3e0f9e84960128a828b83ecf0a3e824ff18e934fff94870f2d083d0822274f81207c174fe120718eafeebff851082851183eef0a3eff0aa10ab117901123c6580eac082c0838a828b838001a3e070fce582c39afae5839bfbd083d082220200142200",
					"1000000", "2" };
	CommandLineRPC(argc, argv);
}
bool CreateTx()
{
	int argc = 8;
	std::vector<std::string> vInputParams;
	vInputParams.clear();
	vInputParams.push_back("010000000100");
	vInputParams.push_back(
			"[\"5yNhSL7746VV5qWHHDNLkSQ1RYeiheryk9uzQG6C5d\"]");
	vInputParams.push_back("0b434b430046003531303030303030300000000000000000000000");
	vInputParams.push_back("100000000");
	vInputParams.push_back("10");
	std::string strReturn("");
	if (TestCallRPC("createcontracttx", vInputParams, strReturn) > 0) {
		vInputParams.clear();
		cout << "create secure tx succeed1:"<<strReturn<< endl;
		TxHash = strReturn;
	}
	return false;
}
void ListRegScript1() {
	//cout << "listRegScript" << endl;
	int argc = 2;
	char *argv[2] = { "rpctest", "listregscript" };
	CommandLineRPC(argc, argv);
}
void CreateRegScriptTx2() {
	cout <<"CreateRegScriptTx1" << endl;
	int argc = 7;
	char *argv[7] =
			{ "rpctest", "registerscripttx", "5zQPcC1YpFMtwxiH787pSXanUECoGsxUq3KZieJxVG","0",
					"D:\\VmSdk\\sdk\\Debug\\Exe\\sdk.bin",
					"1000000", "2" };
	CommandLineRPC(argc, argv);
}
void CreateFirstTx()
{
	int argc = 8;
	std::vector<std::string> vInputParams;
	vInputParams.clear();
	vInputParams.push_back("010000000100");
	vInputParams.push_back(
			"[\"5yNhSL7746VV5qWHHDNLkSQ1RYeiheryk9uzQG6C5d\"]");
	vInputParams.push_back("01");
	vInputParams.push_back("1000000");
	vInputParams.push_back("10");
	std::string strReturn("");
	if (TestCallRPC("createcontracttx", vInputParams, strReturn) > 0) {
		vInputParams.clear();
		cout << "create secure tx succeed1:"<<strReturn<< endl;
		TxHash = strReturn;
	}
	return ;
}
void CreateSecondTx()
{
	int argc = 8;
	std::vector<std::string> vInputParams;
	vInputParams.clear();
	vInputParams.push_back("010000000100");
	vInputParams.push_back(
			"[\"5yNhSL7746VV5qWHHDNLkSQ1RYeiheryk9uzQG6C5d\"]");
	uint256 hash(TxHash.c_str());
	string param ="02";
	param += HexStr(hash);
	vInputParams.push_back(param);
	vInputParams.push_back("1000000");
	vInputParams.push_back("10");
	std::string strReturn("");
	if (TestCallRPC("createcontracttx", vInputParams, strReturn) > 0) {
		vInputParams.clear();
		cout << "create secure tx succeed1:"<<strReturn<< endl;
	//	TxHash = strReturn;
	}
	return ;
}

void CreateThirdTx()
{
	int argc = 8;
	std::vector<std::string> vInputParams;
	vInputParams.clear();
	vInputParams.push_back("010000000100");
	vInputParams.push_back(
			"[\"5yNhSL7746VV5qWHHDNLkSQ1RYeiheryk9uzQG6C5d\"]");
	vInputParams.push_back("03");
	vInputParams.push_back("1000000");
	vInputParams.push_back("10");
	std::string strReturn("");
	if (TestCallRPC("createcontracttx", vInputParams, strReturn) > 0) {
		vInputParams.clear();
		cout << "create secure tx succeed1:"<<strReturn<< endl;
	//	TxHash = strReturn;
	}
	return ;
}
void CreateForthTx()
{
	int argc = 8;
	std::vector<std::string> vInputParams;
	vInputParams.clear();
	vInputParams.push_back("010000000100");
	vInputParams.push_back(
			"[\"5yNhSL7746VV5qWHHDNLkSQ1RYeiheryk9uzQG6C5d\"]");
	vInputParams.push_back("04");
	vInputParams.push_back("1000000");
	vInputParams.push_back("10");
	std::string strReturn("");
	if (TestCallRPC("createcontracttx", vInputParams, strReturn) > 0) {
		vInputParams.clear();
		cout << "create secure tx succeed1:"<<strReturn<< endl;
	//	TxHash = strReturn;
	}
	return ;
}

void CreateRegScriptTx3() {
	cout <<"CreateRegScriptTx1" << endl;
	int argc = 7;
	char *argv[7] =
			{ "rpctest", "registerscripttx", "5zQPcC1YpFMtwxiH787pSXanUECoGsxUq3KZieJxVG","1",
					"010000000100",
					"1000000", "2" };
	CommandLineRPC(argc, argv);
}
void CreateFiveTx()
{
	int argc = 8;
	std::vector<std::string> vInputParams;
	vInputParams.clear();
	vInputParams.push_back("010000000100");
	vInputParams.push_back(
			"[\"5yNhSL7746VV5qWHHDNLkSQ1RYeiheryk9uzQG6C5d\"]");
	uint256 hash(TxHash.c_str());
	string param ="05";
	param += HexStr(hash);
	vInputParams.push_back(param);
	vInputParams.push_back("1000000");
	vInputParams.push_back("10");
	std::string strReturn("");
	if (TestCallRPC("createcontracttx", vInputParams, strReturn) > 0) {
		vInputParams.clear();
		cout << "create secure tx succeed1:"<<strReturn<< endl;
		TxHash = strReturn;
	}
	return ;
}
BOOST_AUTO_TEST_SUITE(VM_fun)

BOOST_AUTO_TEST_CASE(Gloal_fun)
{
	//cout << "=====================init account info ========================" << endl;
//	GetAccountState1();
//	CreateRegScriptTx1();
//	GenerateMiner();
//	cout << "=====================create tx 1========================" << endl;
//	ListRegScript1();
//	CreateTx();
//	GenerateMiner();
//	GetAccountState1();
}

BOOST_AUTO_TEST_CASE(test_fun)
{
	GetAccountState1();
	CreateRegScriptTx2();
	GenerateMiner();
//	cout << "start first" << endl;
//	ListRegScript1();
	CreateFirstTx();
	GenerateMiner();
	//cout << "strat second:" << endl;
	CreateSecondTx();
	GenerateMiner();

//	cout << "strat third:" << endl;
	CreateThirdTx();
	GenerateMiner();

//	cout << "script reg:" << endl;
	CreateRegScriptTx3();
	GenerateMiner();

//	cout << "five reg:" << endl;
	CreateFiveTx();
	GenerateMiner();

//	cout << "strat forth:" << endl;
//	CreateForthTx();
//	GenerateMiner(1);
}
BOOST_AUTO_TEST_SUITE_END()
